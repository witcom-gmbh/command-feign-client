# command-feign-client
[![Build Status](https://drone-gh-01.witcom.services/api/badges/witcom-gmbh/command-feign-client/status.svg?ref=refs/heads/main)](https://drone-gh-01.witcom.services/witcom-gmbh/command-feign-client)

A feign-client for FNT Command generated from OpenAPI Specs. 
The client only contains a subset of all available Apis. For a list of generated APIs see the ENTITY_LIST variable in the [Makefile](./Makefile)
 
## Versioning 
If there was a change in the API-Definition (either in BGE or new release of FNT command) a new version of command-feign-client has to be built

Versioning should happen according to https://devhints.io/semver, so

* Version changes of FNT-Command that break the API, are a major change
* Version changes of FNT that add functionality (backwards compatible) are minor changes
* Changes to entities (BGEs) by WiTCOM usually are minor changes.
* Adding APIs to client is a minor change
* bug-fixes by FNT or WiTCOM (BGE) -> patch version

A changelog is generated by using cocogitto from conventional commits

## Quick build

* Access to https://reposilite.witcom.services is required to download bge2swagger

```console
make clean specs/command-openapi.json
mvn -Pgenerate-client clean generate-sources
```

Make sure that it builds

```console
make build
```

Then perform a conventional commit like this (e.g. for a minor change)

```console
git add specs/command-openapi.json
git add openapi-feignclient/*
cog commit feat "Adds feature XYZ"
cog bump -a
```
Use ```cog commit ... -e``` to provide a description 

A drone.io pipeline based build is started which will push the generated library to https://reposilite.witcom.services

## Generate OpenAPI 3.0 specs
If only OpenAPI 3.0 specs are required

```console
make clean specs/command-openapi.json
```

## Command bge2swagger
This library relies on command-bge2swagger (https://github.com/witcom-gmbh/command-bge2swagger) to build OpenApi 2.0 specs from the current FNT Command BGE-Specs

If you have access to WiTCOM Nexus the Quick-build will work.

If not,

* you need to build command-bge2swagger from source and place the JAR-file in ./tools/bge2swagger.jar
* you cannot run make all, run `make build` instead which will not try to deploy the library to WiTCOM Nexus




